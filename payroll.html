<!-- {% if frappe.session.user != "Guest" %} -->
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HRMS - Payroll Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!--Tailwind CDN-->
<script src="https://cdn.tailwindcss.com"></script>
 <!-- ✅ Additional CSS for sidebar collapse functionality -->
 <style>
  /* Override all Tailwind width classes for sidebar */
  #sidebar {
    width: 260px !important;
    min-width: 260px !important;
    max-width: 260px !important;
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1), min-width 0.4s cubic-bezier(0.4, 0, 0.2, 1), max-width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0 !important;
  }
  
  /* Sidebar collapsed styles */
  #sidebar.sidebar-collapsed {
    width: 72px !important;
    min-width: 72px !important;
    max-width: 72px !important;
  }
  
  /* Text elements with smooth transitions */
  .menu-text, .sidebar-logo, .sidebar-user-text {
    transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
    opacity: 1;
    visibility: visible;
  }
  
  #sidebar.sidebar-collapsed .menu-text {
    opacity: 0 !important;
    visibility: hidden !important;
    display: none !important;
  }
  
  #sidebar.sidebar-collapsed .sidebar-logo {
    opacity: 0 !important;
    visibility: hidden !important;
    display: none !important;
  }
  
  #sidebar.sidebar-collapsed .sidebar-user-text {
    opacity: 0 !important;
    visibility: hidden !important;
    display: none !important;
  }
  
  /* User info section with smooth transition */
  .sidebar-user-info {
    transition: justify-content 0.3s ease-in-out, padding 0.3s ease-in-out;
  }
  
  #sidebar.sidebar-collapsed .sidebar-user-info {
    justify-content: center !important;
    padding: 1rem 0.5rem !important;
  }
  
  /* Navigation with smooth transitions */
  .sidebar-nav {
    transition: padding 0.3s ease-in-out;
  }
  
  #sidebar.sidebar-collapsed .sidebar-nav {
    padding: 0.5rem !important;
  }
  
  .sidebar-nav a {
    transition: justify-content 0.3s ease-in-out, padding 0.3s ease-in-out;
  }
  
  #sidebar.sidebar-collapsed .sidebar-nav a {
    justify-content: center !important;
    padding: 0.75rem !important;
  }
  
  .sidebar-nav a .space-x-3 {
    transition: gap 0.3s ease-in-out;
  }
  
  #sidebar.sidebar-collapsed .sidebar-nav a .space-x-3 {
    gap: 0 !important;
  }
  
  /* Ensure main content doesn't overflow */
  main {
    min-width: 0 !important;
    overflow-x: hidden !important;
  }
  
  body {
    overflow-x: hidden !important;
  }
  
  /* Responsive: auto-collapse sidebar on tablet and mobile */
  @media (max-width: 1024px) {
    #sidebar {
      width: 72px !important;
      min-width: 72px !important;
      max-width: 72px !important;
    }
    .menu-text, .sidebar-logo, .sidebar-user-text {
      opacity: 0 !important;
      visibility: hidden !important;
      display: none !important;
    }
    .sidebar-user-info {
      justify-content: center !important;
      padding: 1rem 0.5rem !important;
    }
    .sidebar-nav {
      padding: 0.5rem !important;
    }
    .sidebar-nav a {
      justify-content: center !important;
      padding: 0.75rem !important;
    }
    .sidebar-nav a .space-x-3 {
      gap: 0 !important;
    }
  }
  
  /* Mobile responsive improvements */
  @media (max-width: 640px) {
    body {
      overflow-x: hidden !important;
    }
    
    /* Ensure table scrolls horizontally on mobile */
    .overflow-x-auto {
      -webkit-overflow-scrolling: touch;
    }
    
    /* Better touch targets for mobile */
    button, a {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Adjust chart height on mobile */
    #charts {
      min-height: 250px;
    }
  }
  
  /* Tablet responsive chart */
  @media (min-width: 641px) and (max-width: 1024px) {
    #charts {
      min-height: 300px;
    }
  }
  
  /* Desktop chart height */
  @media (min-width: 1025px) {
    #charts {
      min-height: 400px;
    }
  }
</style>

</head>
<body class = "bg-blue-50/50 flex">
  <!-- Sidebar -->
  <div id="sidebar" class="transition-all duration-300 bg-white border-r flex flex-col justify-between h-[100vh] sticky top-0">
    <div>
      <!-- Logo + Collapse Button -->
      <div class="flex items-center justify-center gap-20 border-b p-4">
       <img src="./assets/CodeAce logo black.svg" alt="CodeAce" class="sidebar-logo w-[100px] h-[50px] object-cover rounded-lg">
        <button id="collapseBtn" class="p-2 rounded-full hover:bg-gray-100">
          <svg id="collapseIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
      </div>

      <!-- Nav Links -->
      <nav class="sidebar-nav p-2 space-y-5">
        <a href="./index.html" class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="currentColor" fill="none" class="size-6">
            <path d="M3 11.9896V14.5C3 17.7998 3 19.4497 4.02513 20.4749C5.05025 21.5 6.70017 21.5 10 21.5H14C17.2998 21.5 18.9497 21.5 19.9749 20.4749C21 19.4497 21 17.7998 21 14.5V11.9896C21 10.3083 21 9.46773 20.6441 8.74005C20.2882 8.01237 19.6247 7.49628 18.2976 6.46411L16.2976 4.90855C14.2331 3.30285 13.2009 2.5 12 2.5C10.7991 2.5 9.76689 3.30285 7.70242 4.90855L5.70241 6.46411C4.37533 7.49628 3.71179 8.01237 3.3559 8.74005C3 9.46773 3 10.3083 3 11.9896Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M15 21.5V16.5C15 15.0858 15 14.3787 14.5607 13.9393C14.1213 13.5 13.4142 13.5 12 13.5C10.5858 13.5 9.87868 13.5 9.43934 13.9393C9 14.3787 9 15.0858 9 16.5V21.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
          <span class="menu-text text-[16px]">Dashboard</span>
        </a>

        <a href="./employee.html" class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="currentColor" fill="none" class="size-6">
            <path d="M15 21.5001C16.3945 21.5001 17.0918 21.5001 17.6672 21.362C19.4955 20.923 20.9229 19.4956 21.3618 17.6673C21.5 17.0919 21.5 16.3946 21.5 15.0001M9 21.5001C7.60547 21.5001 6.90821 21.5001 6.33277 21.362C4.50453 20.923 3.07707 19.4956 2.63815 17.6673C2.5 17.0919 2.5 16.3946 2.5 15.0001M9 2.50012C7.60547 2.50012 6.90821 2.50012 6.33277 2.63827C4.50453 3.0772 3.07707 4.50465 2.63815 6.3329C2.5 6.90833 2.5 7.6056 2.5 9.00012M15 2.50012C16.3945 2.50012 17.0918 2.50012 17.6672 2.63827C19.4955 3.0772 20.9229 4.50465 21.3618 6.3329C21.5 6.90833 21.5 7.6056 21.5 9.00012" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M15 9.5C15 7.84315 13.6569 6.5 12 6.5C10.3431 6.5 9 7.84315 9 9.5C9 11.1569 10.3431 12.5 12 12.5C13.6569 12.5 15 11.1569 15 9.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M17 17.5C17 14.7386 14.7614 12.5 12 12.5C9.23858 12.5 7 14.7386 7 17.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
          <span class="menu-text text-[16px]">Employees</span>
        </a>

        <a href="./department.html" class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="currentColor" fill="none" class="size-6 ">
            <path d="M15.5 11C15.5 9.067 13.933 7.5 12 7.5C10.067 7.5 8.5 9.067 8.5 11C8.5 12.933 10.067 14.5 12 14.5C13.933 14.5 15.5 12.933 15.5 11Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M15.4827 11.3499C15.8047 11.4475 16.1462 11.5 16.5 11.5C18.433 11.5 20 9.933 20 8C20 6.067 18.433 4.5 16.5 4.5C14.6851 4.5 13.1928 5.8814 13.0173 7.65013" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M10.9827 7.65013C10.8072 5.8814 9.31492 4.5 7.5 4.5C5.567 4.5 4 6.067 4 8C4 9.933 5.567 11.5 7.5 11.5C7.85381 11.5 8.19535 11.4475 8.51727 11.3499" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M22 16.5C22 13.7386 19.5376 11.5 16.5 11.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M17.5 19.5C17.5 16.7386 15.0376 14.5 12 14.5C8.96243 14.5 6.5 16.7386 6.5 19.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M7.5 11.5C4.46243 11.5 2 13.7386 2 16.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
          <span class="menu-text text-[16px]">Department</span>
        </a>

        <a href="./attendance.html" class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="currentColor" fill="none" class="size-6">
            <path d="M3 4V14C3 16.8284 3 18.2426 3.87868 19.1213C4.75736 20 6.17157 20 9 20H21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M7 16L16 16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M7 12L20 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M7 8L13 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
          <span class="menu-text text-[16px]">Attendance</span>
        </a>
        <a href ="./recruitment.html" class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="currentColor" fill="none">
          <path d="M11.0065 21.0001H9.60546C6.02021 21.0001 4.22759 21.0001 3.11379 19.8652C2 18.7302 2 16.9035 2 13.2501C2 9.59674 2 7.77004 3.11379 6.63508C4.22759 5.50012 6.02021 5.50012 9.60546 5.50012H13.4082C16.9934 5.50012 18.7861 5.50012 19.8999 6.63508C20.7568 7.50831 20.9544 8.79102 21 11.0001" stroke="#141B34" stroke-width="1.5" stroke-linecap="round" />
          <path d="M20.0167 20.0233L21.9998 22M21.0528 17.5265C21.0528 15.5789 19.4739 14 17.5263 14C15.5786 14 13.9998 15.5789 13.9998 17.5265C13.9998 19.4742 15.5786 21.0531 17.5263 21.0531C19.4739 21.0531 21.0528 19.4742 21.0528 17.5265Z" stroke="#141B34" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M15.9998 5.5L15.9004 5.19094C15.4054 3.65089 15.1579 2.88087 14.5686 2.44043C13.9794 2 13.1967 2 11.6313 2H11.3682C9.8028 2 9.02011 2 8.43087 2.44043C7.84162 2.88087 7.59411 3.65089 7.0991 5.19094L6.99976 5.5" stroke="#141B34" stroke-width="1.5" />
      </svg>
      <span class="menu-text text-[16px]">Recruitment</span>
      </a>
        <a href="./leave.html" class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="currentColor" fill="none" class="size-6">
            <path d="M14.5 6C14.4534 4.90658 14.3147 4.20985 13.9025 3.67376C13.7426 3.46574 13.5561 3.27954 13.3476 3.11992C12.5381 2.5 11.363 2.5 9.01286 2.5H8.51184C5.67786 2.5 4.26087 2.5 3.38046 3.37867C2.50006 4.25734 2.50004 5.67157 2.50003 8.49997L2.50002 15.5C2.50001 18.3284 2.5 19.7426 3.38042 20.6213C4.26083 21.5 5.67783 21.5 8.51184 21.5H9.01281C11.363 21.5 12.5381 21.5 13.3476 20.8801C13.556 20.7205 13.7426 20.5343 13.9025 20.3263C14.3147 19.7901 14.4534 19.0933 14.5 17.9996" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M20.5 11.9999H8.50002M18 15.5C18 15.5 21.5 12.9223 21.5 12C21.5 11.0777 18 8.5 18 8.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
          <span class="menu-text text-[16px]">Leave</span>
        </a>

        <a href="./payroll.html" class="flex items-center space-x-3 p-2 rounded-lg bg-blue-100 text-blue-600 font-medium">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="currentColor" fill="none" class="size-6">
            <path d="M11 21.5H15C17.8284 21.5 19.2426 21.5 20.1213 20.6213C21 19.7426 21 18.3284 21 15.5V14.5C21 11.6716 21 10.2574 20.1213 9.37868C19.2426 8.5 17.8284 8.5 15 8.5H3V13.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M15 8.49833V4.1103C15 3.22096 14.279 2.5 13.3897 2.5C13.1336 2.5 12.8812 2.56108 12.6534 2.67818L3.7623 7.24927C3.29424 7.48991 3 7.97203 3 8.49833" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M17.5 15.5C17.7761 15.5 18 15.2761 18 15C18 14.7239 17.7761 14.5 17.5 14.5M17.5 15.5C17.2239 15.5 17 15.2761 17 15C17 14.7239 17.2239 14.5 17.5 14.5M17.5 15.5V14.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M10 18H6.5M6.5 18H3M6.5 18V14.5M6.5 18V21.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
          <span class="menu-text text-[16px]">Payroll</span>
        </a>
      </nav>
    </div>

    <!-- User Info -->
    <div class="sidebar-user-info p-4 border-t flex items-center space-x-3">
      <img src="https://i.pravatar.cc/30" class="rounded-full w-8 h-8" alt="user" />
      <span class="sidebar-user-text menu-text text-sm font-medium">Mia Hudson</span>
    </div>
  </div>

   <div class="flex-1 p-2 sm:p-4 md:p-6 overflow-x-hidden">
     <!--Header-->
     <div class="flex items-center bg-white w-full border border-gray-200 rounded-lg shadow-sm p-3 sm:p-4">
      <h1 class="text-lg sm:text-[20px] font-bold text-gray-900">Payroll Overview</h1>
    </div>
    <div class="w-full mt-3 sm:mt-5">
      <div class="bg-white p-3 sm:p-4 rounded-lg border border-gray-200 shadow-sm">
        <div id="charts"></div>
      </div>
     
    </div>
    <div class="mt-3 sm:mt-5">
        <div class="bg-white w-full border border-gray-200 rounded-lg shadow-sm p-2 sm:p-4 overflow-x-auto">
          <div class="mb-3 sm:mb-4 p-2 sm:p-4">
            <h3 class="text-base sm:text-[16px] font-semibold text-gray-900">Payroll Summary</h3>
            <p class="text-xs sm:text-[14px] text-gray-500">Current Month Overview - October 2025</p>
          </div>
          
          <div class="overflow-x-auto p-2 sm:p-4 pt-0" style="-webkit-overflow-scrolling: touch;">
            <table class="w-full text-xs sm:text-sm text-left">
              <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium">Metric</th>
                  <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-left">Current Month</th>
                  <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-left">Previous Month</th>
                  <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-left">Change</th>
                  <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-left">% Change</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-200">
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">Total Employees</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold">52</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">48</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">+4</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">+8.3%</td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">Payroll Period</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold">Oct 2025</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">Sep 2025</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-500">-</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-500">-</td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">Total Gross Pay</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold text-green-600">₹12,40,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">₹11,85,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">+₹55,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">+4.6%</td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">Basic Salary</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold">₹8,90,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">₹8,50,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">+₹40,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">+4.7%</td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">Allowances</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold">₹2,20,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">₹2,15,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">+₹5,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">+2.3%</td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">Overtime Pay</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold">₹1,30,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">₹1,20,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">+₹10,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">+8.3%</td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">Total Deductions</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold text-red-600">₹1,80,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">₹1,75,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-600 font-medium">+₹5,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-600 font-medium">+2.9%</td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">Income Tax</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold text-red-600">₹95,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">₹92,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-600 font-medium">+₹3,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-600 font-medium">+3.3%</td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">Provident Fund</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold text-red-600">₹45,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">₹43,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-600 font-medium">+₹2,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-600 font-medium">+4.7%</td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">ESI & Other</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold text-red-600">₹40,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">₹40,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-500">₹0</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-500">0%</td>
                </tr>
                <tr class="bg-blue-50 border-t-2 border-blue-200">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-bold text-xs sm:text-sm md:text-lg text-gray-900">Net Pay</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left font-bold text-xs sm:text-sm md:text-lg text-blue-600">₹10,60,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">₹10,10,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm md:text-base text-green-600 font-bold">+₹50,000</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm md:text-base text-green-600 font-bold">+5.0%</td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">Average Salary</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold">₹20,385</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">₹24,688</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-600 font-medium">-₹4,303</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-600 font-medium">-17.4%</td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-xs sm:text-sm text-gray-900">Processing Status</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left">
                    <span class="bg-green-100 text-green-800 text-xs font-medium px-1.5 sm:px-2.5 py-0.5 rounded-full">Completed</span>
                  </td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">Completed</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-500">-</td>
                  <td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-500">-</td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0 text-xs sm:text-sm text-gray-600 pl-2 sm:pl-8 pt-2 sm:pt-0">
            <div class="flex flex-wrap items-center gap-2 sm:gap-4">
              <span class="flex items-center gap-1">
                <div class="w-2 h-2 sm:w-3 sm:h-3 bg-green-500 rounded-full"></div>
                <span class="text-xs sm:text-sm">Increase</span>
              </span>
              <span class="flex items-center gap-1">
                <div class="w-2 h-2 sm:w-3 sm:h-3 bg-red-500 rounded-full"></div>
                <span class="text-xs sm:text-sm">Decrease</span>
              </span>
              <span class="flex items-center gap-1">
                <div class="w-2 h-2 sm:w-3 sm:h-3 bg-gray-400 rounded-full"></div>
                <span class="text-xs sm:text-sm">No Change</span>
              </span>
            </div>
            <div class="text-xs text-gray-500">
              Last updated: Oct 31, 2025 at 11:59 PM
            </div>
          </div>
        </div>
    </div>
    <div class="mt-3 sm:mt-5">
      <div class="bg-white w-full border border-gray-200 rounded-lg shadow-sm p-2 sm:p-4 overflow-x-auto">
        <div class="mb-3 sm:mb-4 p-2 sm:p-4">
          <h3 class="text-base sm:text-[16px] font-semibold text-gray-900">Payroll Summary</h3>
          <p class="text-xs sm:text-[14px] text-gray-500">Current Month Overview - October 2025</p>
        </div>
        
        <div class="overflow-x-auto p-2 sm:p-4 pt-0" style="-webkit-overflow-scrolling: touch;">
          <table class="w-full text-xs sm:text-sm text-left">
            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
              <tr>
                <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium">Employee Name</th>
                <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-left">Department</th>
                <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-left">Designation</th>
                <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-left">Gross Pay</th>
                <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-left">Deductions</th>
                <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-left">Net Pay</th>
                <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-left">Status</th>
                <th class="px-2 sm:px-4 py-2 sm:py-3 font-medium text-left">Actions</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
             <tr class="hover:bg-gray-50">
<td class="px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-900">John Doe</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">Sales</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">Sales Executive</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-800">₹58,000</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-500">₹3,200</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">₹54,800</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left">
  <span class="px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs font-semibold text-green-700 bg-green-100 rounded-full">Paid</span>
</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-blue-600 cursor-pointer hover:underline">View</td>
</tr>

<tr class="hover:bg-gray-50">
<td class="px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-900">Priya Sharma</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">HR</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">HR Manager</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-800">₹72,000</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-500">₹4,500</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">₹67,500</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left">
  <span class="px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs font-semibold text-yellow-700 bg-yellow-100 rounded-full">Pending</span>
</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-blue-600 cursor-pointer hover:underline">Edit</td>
</tr>

<tr class="hover:bg-gray-50">
<td class="px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-900">Karan Patel</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">IT</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">Software Engineer</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-800">₹85,000</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-500">₹6,800</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">₹78,200</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left">
  <span class="px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs font-semibold text-green-700 bg-green-100 rounded-full">Paid</span>
</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-blue-600 cursor-pointer hover:underline">View</td>
</tr>

<tr class="hover:bg-gray-50">
<td class="px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-900">Ananya Iyer</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">Finance</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">Accountant</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-800">₹63,500</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-500">₹3,900</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">₹59,600</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left">
  <span class="px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs font-semibold text-green-700 bg-green-100 rounded-full">Paid</span>
</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-blue-600 cursor-pointer hover:underline">View</td>
</tr>

<tr class="hover:bg-gray-50">
<td class="px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-medium text-gray-900">Rahul Verma</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">Operations</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-600">Logistics Coordinator</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-gray-800">₹52,000</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-red-500">₹2,800</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-green-600 font-medium">₹49,200</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left">
  <span class="px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs font-semibold text-red-700 bg-red-100 rounded-full">Unpaid</span>
</td>
<td class="px-2 sm:px-4 py-2 sm:py-3 text-left text-xs sm:text-sm text-blue-600 cursor-pointer hover:underline">Edit</td>
</tr>

             
            </tbody>
          </table>
        </div>
        
       
      </div>
  </div>
   </div>
 

   <script>
    const collapseBtn = document.getElementById("collapseBtn");
    const sidebar = document.getElementById("sidebar");
    const collapseIcon = document.getElementById("collapseIcon");

    collapseBtn.addEventListener("click", () => {
      // Toggle the collapsed class - CSS will handle the transitions
      sidebar.classList.toggle("sidebar-collapsed");
      collapseIcon.classList.toggle("rotate-180");
      
      // Debug logging
      console.log("Sidebar classes:", sidebar.className);
      console.log("Sidebar width:", window.getComputedStyle(sidebar).width);
      console.log("Is collapsed:", sidebar.classList.contains("sidebar-collapsed"));
    });
  </script>
  <!--Chart Scripts-->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <!--Area chart script-->
  <script>
     var options = {
      series: [
  {
    name: "Payroll Overview",
    data: [1460, 2125, 9870, 19535, 15025, 19620, 4750, 10150, 10840, 10210, 19025, 5650]
  }
],
          chart: {
          type: 'area',
          height: 300,
          zoom: {
            enabled: true
          },
          toolbar: {
            show: false
          },
          colors:['#2563EB']
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          curve: 'smooth'
        },
        
        title: {
          text: 'Monthly Salary Distribution',
          align: 'left',
          style: {
            fontSize: '16px',
            fontWeight: 'semibold',
            color: '#374151'
          }
        },
        
        xaxis: {
          categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
          labels: {
            style: {
              fontSize: '11px',
              fontWeight: 'regular',
              color: '#BFC3CC'
            }
          }
        },
        yaxis: {
          opposite: false,
          labels: {
            style: {
              fontSize: '11px',
              fontWeight: 'regular',
              color: '#374151'
            }
          },
            title: {
              text: '₹ in thousands',
              style: {
                fontSize: '11px',
                fontWeight: 'regular',
                color: '#374151'
              }
            }
        },
        responsive: [{
          breakpoint: 768,
          options: {
            chart: {
              height: 300
            },
            xaxis: {
              labels: {
                style: {
                  fontSize: '10px'
                }
              }
            },
            yaxis: {
              labels: {
                style: {
                  fontSize: '10px'
                }
              }
            }
          }
        }, {
          breakpoint: 480,
          options: {
            chart: {
              height: 250
            },
            title: {
              style: {
                fontSize: '14px'
              }
            },
            xaxis: {
              labels: {
                style: {
                  fontSize: '9px'
                }
              }
            },
            yaxis: {
              labels: {
                style: {
                  fontSize: '9px'
                }
              },
              title: {
                style: {
                  fontSize: '10px'
                }
              }
            }
          }
        }],
        legend: {
          horizontalAlign: 'right',
          position: 'top',
          style: {
            fontSize: '16px',
            fontWeight: 'bold',
            color: '#374151'
          }
        }
        };

        var chart = new ApexCharts(document.querySelector("#charts"), options);
        chart.render();
  </script>
  <!--Deaprtment wise payroll donut chart script-->
  <script>
       var options = {
          series: [44, 55, 13, 43],
          chart: {
          width: 380,
          type: 'pie',
        },
        colors: ['#6495ED', '#60A5FA', '#2563EB', '#1E40AF'],
        labels: ['IT', 'HR', 'Finance', 'Marketing'],
        responsive: [{
          breakpoint: 480,
          options: {
            chart: {
              width: 200
            },
            legend: {
              position: 'bottom'
            }
          }
        }]
        };

        var chart = new ApexCharts(document.querySelector("#department-wise-payroll-donut-chart"), options);
        chart.render();
      
  </script>
  <!--Employee wise payroll bar chart script-->
  <script>
    // Initialize Preline after DOM is fully loaded
    document.addEventListener('DOMContentLoaded', function() {
      // Load Preline dynamically to ensure DOM is ready
      const script = document.createElement('script');
      script.src = 'https://unpkg.com/preline/dist/preline.js';
      script.onload = function() {
        // Preline will auto-initialize when loaded
        console.log('Preline loaded successfully');
        
        // Force re-initialization of Preline components after a short delay
        setTimeout(function() {
          if (window.HSStaticMethods) {
            window.HSStaticMethods.autoInit();
            console.log('Preline components re-initialized');
          }
        }, 100);
      };
      
      // Fallback manual implementation for collapse button
      setTimeout(function() {
        const collapseBtn = document.querySelector('[data-hs-overlay-minifier]');
        const sidebar = document.querySelector('#hs-sidebar-content-push-to-mini-sidebar');
        
        if (collapseBtn && sidebar) {
          // Add manual click handler as fallback
          collapseBtn.addEventListener('click', function(e) {
            e.preventDefault();
            sidebar.classList.toggle('hs-overlay-minified');
            console.log('Sidebar collapsed/expanded manually');
          });
          console.log('Fallback collapse button handler added');
        }
      }, 200);
      
      script.onerror = function() {
        console.error('Failed to load Preline.js');
      };
      document.head.appendChild(script);
    });
  </script>

</body>
</html>

<!-- {% else %}
  // Redirect guest users to login page
  window.location.href = "/login";
</script>
{% endif %}
